#!/bin/bash
set -e

# enter project's root dir
APP_DIR=$(dirname "$(readlink -e "$0")")
cd "$APP_DIR"

# all builds with ninja
ERRORS=0
RUNS=0
for bs in *
do
  [ -f "$bs" ] || continue
  ((++RUNS))
  time "./$bs" || ((++ERRORS))
done

echo "$0: found $ERRORS errors in total of $RUNS runs"
exit "$ERRORS"
